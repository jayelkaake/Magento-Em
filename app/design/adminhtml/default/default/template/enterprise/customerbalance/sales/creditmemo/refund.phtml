<?php
/**
 * Magento Enterprise Edition
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Magento Enterprise Edition License
 * that is bundled with this package in the file LICENSE_EE.txt.
 * It is also available through the world-wide-web at this URL:
 * http://www.magentocommerce.com/license/enterprise-edition
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     default_default
 * @copyright   Copyright (c) 2011 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://www.magentocommerce.com/license/enterprise-edition
 */
?>

<?php if ($this->canRefundToCustomerBalance()): ?>
    <p>
        <label for="creditmemo_customerbalance_return_enable"><?php echo Mage::helper('enterprise_customerbalance')->__('Refund to Store Credit') ?></label>
        <input type="hidden" name="creditmemo[refund_customerbalance_return_enable]" value="0">
        <input type="checkbox" name="creditmemo[refund_customerbalance_return_enable]" value="1" id="creditmemo_customerbalance_return_enable"<?php if (Mage::helper('enterprise_customerbalance')->isAutoRefundEnabled()): ?> checked="checked"<?php endif ?>>
        <input type="text" name="creditmemo[refund_customerbalance_return]" value="<?php echo $this->getReturnValue(); ?>" id="creditmemo_customerbalance_return" class="input-text not-negative-amount" style="width: 60px; text-align: right;">
        <script type="text/javascript">
        //<![CDATA[
            function toggleCustomerBalanceRefundAmount() {
                if ($('creditmemo_customerbalance_return_enable').checked) {
                    $('creditmemo_customerbalance_return').disabled = false;
                } else {
                    $('creditmemo_customerbalance_return').disabled = true;
                }
            }

            Event.observe($('creditmemo_customerbalance_return_enable'), 'change', toggleCustomerBalanceRefundAmount);
            toggleCustomerBalanceRefundAmount();
        //]]>
        </script>
    </p>
<?php endif; ?>
